<div id="widget-container"></div>

<script>
    (async () => {
        const widgetContainer = document.getElementById('widget-container');
        const timestamp = new Date().getTime();
        const widgetUrl = `https://raw.githubusercontent.com/maceacla/brightspaceMods/main/elec4707w2025/widgetCode/title-card-widget.html?t=${timestamp}`;
        
        try {
            console.log('Fetching widget HTML...');
            const response = await fetch(widgetUrl, { cache: 'no-store' });
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            let widgetHTML = await response.text();
            widgetContainer.innerHTML = widgetHTML;
            console.log('Widget HTML loaded successfully');
        } catch (error) {
            console.error('Failed to load widget:', error);
            widgetContainer.innerHTML = '<p>Error loading widget</p>';
        }
    })();
</script>